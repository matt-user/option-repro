var te=(a,e,t)=>{if(!e.has(a))throw TypeError("Cannot "+t)};var I=(a,e,t)=>(te(a,e,"read from private field"),t?t.call(a):e.get(a)),_=(a,e,t)=>{if(e.has(a))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(a):e.set(a,t)},$=(a,e,t,r)=>(te(a,e,"write to private field"),r?r.call(a,t):e.set(a,t),t);import{Logger as Te}from"@ethersproject/logger";var be=new Te("0.16.0"),i=class{constructor(e,t,r){this.name=e,this.type=t,this.encodedLength=r}throwError(e,t){throw be.throwArgumentError(e,this.name,t),new Error("unreachable")}setOffset(e){this.offset=e}};import{concat as Ce}from"@ethersproject/bytes";var R=class extends i{constructor(t,r){super("array",`[${t.type}; ${r}]`,r*t.encodedLength);this.coder=t,this.length=r}encode(t){return Array.isArray(t)||this.throwError("expected array value",t),this.length!==t.length&&this.throwError("Types/values length mismatch",t),Ce(Array.from(t).map(r=>this.coder.encode(r)))}decode(t,r){let n=r;return[Array(this.length).fill(0).map(()=>{let s;return[s,n]=this.coder.decode(t,n),s}),n]}};import{arrayify as Ae}from"@ethersproject/bytes";import{bn as xe,toHex as Oe}from"@fuel-ts/math";var P=class extends i{constructor(){super("b256","b256",32)}encode(e){let t;try{t=Ae(e)}catch{this.throwError(`Invalid ${this.type}`,e)}return t.length!==32&&this.throwError(`Invalid ${this.type}`,e),t}decode(e,t){let r=e.slice(t,t+32);return xe(r).isZero()&&(r=new Uint8Array(32)),r.length!==32&&this.throwError("Invalid size for b256",r),[Oe(r,32),t+32]}};import{bn as re,toBytes as ne}from"@fuel-ts/math";var b=class extends i{constructor(){super("boolean","boolean",8)}encode(e){let t;try{t=ne(e?1:0)}catch{this.throwError("Invalid bool",e)}return t.length>1&&this.throwError("Invalid bool",e),ne(t,8)}decode(e,t){let r=re(e.slice(t,t+8));return r.isZero()?[!1,t+8]:(r.eq(re(1))||this.throwError("Invalid boolean value",r),[!0,t+8])}};import{bn as oe,toBytes as se}from"@fuel-ts/math";var D=class extends i{constructor(){super("byte","byte",8)}encode(e){let t;try{t=se(e,1)}catch{this.throwError("Invalid Byte",e)}return se(t,8)}decode(e,t){let r=e.slice(t,t+8),n=oe(r);return n.gt(oe(255))&&this.throwError("Invalid Byte",n),[Number(n),t+8]}};import{concat as Ie}from"@ethersproject/bytes";import{toNumber as Ve}from"@fuel-ts/math";import{bn as Ee,toBytes as we}from"@fuel-ts/math";var l=class extends i{constructor(){super("u64","u64",8)}encode(e){let t;try{t=we(e,8)}catch{this.throwError(`Invalid ${this.type}`,e)}return t}decode(e,t){let r=e.slice(t,t+8);return r=r.slice(0,8),[Ee(r),t+8]}};var N,S,C=class extends i{constructor(t,r){let n=new l,o=Object.values(r).reduce((s,d)=>Math.max(s,d.encodedLength),0);super("enum",`enum ${t}`,n.encodedLength+o);_(this,N,void 0);_(this,S,void 0);this.name=t,this.coders=r,$(this,N,n),$(this,S,o)}encode(t){let[r,...n]=Object.keys(t);if(!r)throw new Error("A field for the case must be provided");if(n.length!==0)throw new Error("Only one field must be provided");let o=this.coders[r],s=Object.keys(this.coders).indexOf(r),d=o.encode(t[r]),c=new Uint8Array(I(this,S)-o.encodedLength);return Ie([I(this,N).encode(s),c,d])}decode(t,r){let n=r,o;[o,n]=new l().decode(t,n);let s=Ve(o),d=Object.keys(this.coders)[s];if(!d)throw new Error(`Invalid caseIndex "${s}". Valid cases: ${Object.keys(this.coders)}`);let c=this.coders[d];return n+=I(this,S)-c.encodedLength,[o,n]=c.decode(t,n),[{[d]:o},n]}};N=new WeakMap,S=new WeakMap;import{toNumber as Fe,toBytes as ae}from"@fuel-ts/math";var U=class extends i{constructor(t){super("number",t,8);switch(this.baseType=t,t){case"u8":this.length=1;break;case"u16":this.length=2;break;case"u32":default:this.length=4;break}}encode(t){let r;try{r=ae(t)}catch{this.throwError(`Invalid ${this.baseType}`,t)}return r.length>this.length&&this.throwError(`Invalid ${this.baseType}. Too many bytes.`,t),ae(r,8)}decode(t,r){let n=t.slice(r,r+8);return n=n.slice(8-this.length,8),[Fe(n),r+8]}};import{concat as Re}from"@ethersproject/bytes";import{toUtf8Bytes as Pe,toUtf8String as De}from"@ethersproject/strings";var J,B=class extends i{constructor(t){let r=(8-t)%8;r=r<0?r+8:r;super("string",`str[${t}]`,t+r);_(this,J,void 0);this.length=t,$(this,J,r)}encode(t){let r=Pe(t.slice(0,this.length)),n=new Uint8Array(I(this,J));return Re([r,n])}decode(t,r){let n=t.slice(r,r+this.length),o=De(n),s=I(this,J);return[o,r+this.length+s]}};J=new WeakMap;import{concat as Se}from"@ethersproject/bytes";var V=class extends C{encode(e){return super.encode(this.toSwayOption(e))}toSwayOption(e){return e!==void 0?{Some:e}:{None:[]}}decode(e,t){let[r,n]=super.decode(e,t);return[this.toOption(r),n]}toOption(e){if(e&&"Some"in e)return e.Some}};var k=class extends i{constructor(t,r){let n=Object.values(r).reduce((o,s)=>o+s.encodedLength,0);super("struct",`struct ${t}`,n);this.name=t,this.coders=r}encode(t){let r=Object.keys(this.coders).map(n=>{let o=this.coders[n],s=t[n];return!(o instanceof V)&&s==null&&this.throwError(`Invalid ${this.type}. Field "${n}" not present.`,t),o.encode(s)});return Se(r)}decode(t,r){let n=r;return[Object.keys(this.coders).reduce((s,d)=>{let c=this.coders[d],y;return[y,n]=c.decode(t,n),s[d]=y,s},{}),n]}};import{concat as Ue}from"@ethersproject/bytes";var A=class extends i{constructor(t){let r=t.reduce((n,o)=>n+o.encodedLength,0);super("tuple",`(${t.map(n=>n.type).join(", ")})`,r);this.coders=t}encode(t){return this.coders.length!==t.length&&this.throwError("Types/values length mismatch",{value:t}),Ue(this.coders.map((r,n)=>r.encode(t[n])))}decode(t,r){let n=r;return[this.coders.map(s=>{let d;return[d,n]=s.decode(t,n),d}),n]}};import{concat as ue}from"@ethersproject/bytes";var v="enum Option",de="struct Vec",Z=/str\[(?<length>[0-9]+)\]/,M=/\[(?<item>[\w\s\\[\]]+);\s*(?<length>[0-9]+)\]/,W=/^struct (?<name>\w+)$/,Y=/^enum (?<name>\w+)$/,ie=/^\((?<items>.*)\)$/,ce=/^generic (?<name>\w+)$/,pe=8,Vt=32,Ft=255,Rt=32,Pt=32,Dt=10240,St=104;var Je=3,h=class extends i{constructor(t){super("struct","struct Vec",0);this.coder=t}static getBaseOffset(){return Je*8}getEncodedVectorData(t){Array.isArray(t)||this.throwError("expected array value",t);let r=Array.from(t).map(n=>this.coder.encode(n));return ue(r)}encode(t){Array.isArray(t)||this.throwError("expected array value",t);let r=[],n=this.offset||0;return r.push(new l().encode(n)),r.push(new l().encode(t.length)),r.push(new l().encode(t.length)),ue(r)}decode(t,r){return this.throwError("unexpected Vec decode","not implemented"),[void 0,r]}};function j(a){return a.filter(e=>(e==null?void 0:e.type)!=="()"&&e!=="()")}function ye(a){return a.some(e=>(e==null?void 0:e.type)===v)}function me(a,e,t=0){let r=[],n=a.map((d,c)=>{if(!(d instanceof h))return{byteLength:d.encodedLength};let y=d.getEncodedVectorData(e[c]);return r.push(y),{vecByteLength:y.byteLength}}),o=r.length*h.getBaseOffset()+t,s=a.map((d,c)=>d instanceof h?n.reduce((y,f,F)=>"byteLength"in f?y+f.byteLength:F===0&&F===c?o:F<c?y+f.vecByteLength+o:y,0):0);return a.forEach((d,c)=>d.setOffset(s[c])),r}var q=class{constructor(e){this.inputs=[];this.outputs=[];this.type=e.type,this.name=e.name,this.inputs=e.inputs,this.outputs=e.outputs}};import{defineReadOnly as Be}from"@ethersproject/properties";function ke(a,e){Object.keys(e).forEach(t=>{let r=t,n=e[r];Be(a,r,n)})}var T=class{constructor(e){ke(this,e),this.isParamType=!0,Object.freeze(this)}getSignaturePrefix(){if(this.type){if(W.test(this.type))return"s";if(M.test(this.type))return"a";if(Y.test(this.type))return"e"}return""}getSignatureContent(){var n,o;let e=this.type||"",t=(n=M.exec(e))==null?void 0:n.groups;if(t)return`[${this.components?this.components[0].getSighash():t.item};${t.length}]`;let r=(o=Z.exec(e))==null?void 0:o.groups;if(r)return`str[${r.length}]`;if(Array.isArray(this.components)){let s=Array.isArray(this.typeArguments)?`<${this.typeArguments.map(c=>c.getSighash()).join(",")}>`:"",d=`(${this.components.map(c=>c.getSighash()).join(",")})`;return`${s}${d}`}return e}getSighash(){let e=this.getSignaturePrefix(),t=this.getSignatureContent();return`${e}${t}`}static fromObject(e){return T.isParamType(e)?e:new T({name:e.name,type:e.type,components:e.components?e.components.map(T.fromObject):void 0,typeArguments:e.typeArguments?e.typeArguments.map(T.fromObject):void 0})}static isParamType(e){return Boolean(e==null?void 0:e.isParamType)}};var x=class extends q{static fromObject(e){let{inputs:t=[],outputs:r=[]}=e,n={type:"function",name:e.name,inputs:t.map(T.fromObject),outputs:r.map(T.fromObject)};return new x(n)}getInputsSighash(){let e=this.inputs.map(t=>t.getSighash());return`${this.name}(${e.join(",")})`}};import{arrayify as G,concat as ge,hexlify as X}from"@ethersproject/bytes";import{Logger as _e}from"@ethersproject/logger";import{sha256 as $e}from"@ethersproject/sha2";import{toUtf8Bytes as he}from"@ethersproject/strings";import{concat as le,arrayify as Le}from"@ethersproject/bytes";import{Logger as K}from"@ethersproject/logger";var z=new K("0.16.0"),O=class{constructor(){z.checkNew(new.target,O)}getCoder(e){var d,c,y,f,F,Q;switch(e.type){case"u8":case"u16":case"u32":return new U(e.type);case"u64":return new l;case"bool":return new b;case"byte":return new D;case"b256":return new P;default:}let t=(d=M.exec(e.type))==null?void 0:d.groups;if(t){let m=parseInt(t.length,10),g=(c=e.components)==null?void 0:c[0];if(!g)throw new Error("Expected array type to have an item component");let w=this.getCoder(g);return new R(w,m)}let r=(y=Z.exec(e.type))==null?void 0:y.groups;if(r){let m=parseInt(r.length,10);return new B(m)}if(e.type===de&&Array.isArray(e.typeArguments)){let m=e.typeArguments[0];if(!m)throw new Error("Expected Vec type to have a type argument");let g=this.getCoder(m);return new h(g)}let n=(f=W.exec(e.type))==null?void 0:f.groups;if(n&&Array.isArray(e.components)){let m=e.components.reduce((g,w)=>(g[w.name]=this.getCoder(w),g),{});return new k(n.name,m)}let o=(F=Y.exec(e.type))==null?void 0:F.groups;if(o&&Array.isArray(e.components)){let m=e.components.reduce((w,ee)=>(w[ee.name]=this.getCoder(ee),w),{});return e.type===v?new V(o.name,m):new C(o.name,m)}if(((Q=ie.exec(e.type))==null?void 0:Q.groups)&&Array.isArray(e.components)){let m=e.components.map(g=>this.getCoder(g));return new A(m)}return z.throwArgumentError("Invalid type","type",e.type)}encode(e,t,r=0){let n=j(e),o=t.slice();Array.isArray(t)&&n.length!==t.length&&(ye(e)?(o.length=e.length,o.fill(void 0,t.length)):z.throwError("Types/values length mismatch",K.errors.INVALID_ARGUMENT,{count:{types:n.length,values:t.length},value:{types:e,values:t}}));let s=n.map(f=>this.getCoder(f)),d=me(s,o,r),y=new A(s).encode(o);return le([y,le(d)])}decode(e,t){let r=Le(t),n=j(e),o=f=>{f!==r.length&&z.throwError("Types/values length mismatch",K.errors.INVALID_ARGUMENT,{count:{types:n.length,values:r.length},value:{types:n,bytes:r}})};if(e.length===0||n.length===0){o(r.length?8:0);return}let s=n.map(f=>this.getCoder(f)),d=new A(s),[c,y]=d.decode(r,0);return o(y),c}};var L=class{constructor(e){this.types=e.types,this.functions=e.functions}parseInput(e,t=new Map){let r=this.types[e.type],n,o;if(!r)throw new Error(`${e.type} not found`);if(Array.isArray(e.typeArguments)&&(o=e.typeArguments.map(s=>this.parseInput(s,t))),Array.isArray(r.typeParameters)&&Array.isArray(o)&&r.typeParameters.forEach((s,d)=>{o!=null&&o[d]&&t.set(s,o[d])}),Array.isArray(r.components)&&(n=r.components.map(s=>this.parseInput(s,t))),ce.test(r.type)){let s=t.get(r.typeId);if(s)return{...s,name:e.name}}return{type:r.type,name:e.name,typeArguments:o,components:n}}static unflatten(e){return Array.isArray(e)?e:new L(e).unflatten()}unflatten(){return this.functions.map(e=>({type:"function",name:e.name,inputs:(e.inputs||[]).map(t=>this.parseInput(t)),outputs:e.output?[this.parseInput(e.output)]:[]}))}},fe=a=>{switch(a){case"u8":case"u16":case"u32":case"u64":case"bool":return!1;default:return!0}};var H=new _e("0.16.0"),Ne=a=>{let e=[];return a.forEach(t=>{t.type==="function"&&e.push(x.fromObject(t))}),e},E=class{constructor(e){this.fragments=Ne(L.unflatten(e)),this.abiCoder=new O,this.functions={},this.fragments.forEach(t=>{let r={};switch(t.type){case"function":r=this.functions;break;default:return}let n=t.getInputsSighash();if(r[n]){H.warn(`duplicate definition - ${n}`);return}r[n]=t})}static getSighash(e){let t=typeof e=="string"?he(e):he(e.getInputsSighash());return ge([new Uint8Array(4),G($e(t)).slice(0,4)])}getFunction(e){if(this.functions[e])return this.functions[e];let t=Object.values(this.functions).find(r=>X(E.getSighash(r))===e||r.name===e);return t||H.throwArgumentError(`function ${e} not found.`,"data",t)}decodeFunctionData(e,t){let r=typeof e=="string"?this.getFunction(e):e,n=G(t);return X(n.slice(0,8))!==X(E.getSighash(r))&&H.throwArgumentError(`data signature does not match function ${r.name}.`,"data",X(n)),this.abiCoder.decode(r.inputs,n.slice(16))}encodeFunctionData(e,t,r=0){let n=typeof e=="string"?this.getFunction(e):e;if(!n)throw new Error("Fragment not found");let o=E.getSighash(n),s=j(n.inputs);if(s.length===0)return o;let d=s.length>1||fe(s[0].type),c=this.abiCoder.encode(s,t,r);return ge([o,new b().encode(d),c])}decodeFunctionResult(e,t){let r=typeof e=="string"?this.getFunction(e):e,n=G(t);return this.abiCoder.decode(r.outputs,n)}encodeFunctionResult(e,t){let r=typeof e=="string"?this.getFunction(e):e;if(!r)throw new Error("Fragment not found");return this.abiCoder.encode(r.outputs,t)}};export{L as ABI,Rt as ASSET_ID_LEN,O as AbiCoder,R as ArrayCoder,P as B256Coder,Vt as BYTES_32,b as BooleanCoder,D as ByteCoder,Pt as CONTRACT_ID_LEN,i as Coder,C as EnumCoder,q as Fragment,x as FunctionFragment,E as Interface,Ft as MAX_INPUTS,U as NumberCoder,v as OPTION_CODER_TYPE,B as StringCoder,k as StructCoder,St as TRANSACTION_SCRIPT_FIXED_SIZE,A as TupleCoder,l as U64Coder,de as VEC_CODER_TYPE,Dt as VM_TX_MEMORY,h as VecCoder,pe as WORD_SIZE,M as arrayRegEx,Y as enumRegEx,j as filterEmptyParams,ce as genericRegEx,me as getVectorAdjustments,ye as hasOptionTypes,fe as isReferenceType,Z as stringRegEx,W as structRegEx,ie as tupleRegEx};
//# sourceMappingURL=index.mjs.map