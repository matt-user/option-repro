"use strict";var y=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var v=Object.getOwnPropertyNames;var C=Object.prototype.hasOwnProperty;var w=(e,t)=>{for(var r in t)y(e,r,{get:t[r],enumerable:!0})},A=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of v(t))!C.call(e,o)&&o!==r&&y(e,o,{get:()=>t[o],enumerable:!(n=N(t,o))||n.enumerable});return e};var $=e=>A(y({},"__esModule",{value:!0}),e);var U={};w(U,{Script:()=>R,returnZeroScript:()=>M});module.exports=$(U);var h=require("@ethersproject/bytes"),s=require("@fuel-ts/abi-coder"),a=require("@fuel-ts/transactions");var O=require("@fuel-ts/constants"),c=require("@fuel-ts/transactions");var D=["Success","Revert","OutOfGas","TransactionValidity","MemoryOverflow","ArithmeticOverflow","ContractNotFound","MemoryOwnership","NotEnoughBalance","ExpectedInternalContext","AssetIdNotFound","InputNotFound","OutputNotFound","WitnessNotFound","TransactionMaturity","InvalidMetadataIdentifier","MalformedCallStructure","ReservedRegisterNotWritable","ErrorFlag","InvalidImmediateValue","ExpectedCoinInput","MaxMemoryAccess","MemoryWriteOverlap","ContractNotInInputs","InternalBalanceOverflow","ContractMaxSize","ExpectedUnallocatedStack","MaxStaticContractsReached","TransferAmountCannotBeZero","ExpectedOutputVariable","ExpectedParentInternalContext","IllegalJump","NonZeroMessageOutputRecipient","ZeroedMessageOutputRecipient"],d="https://docs.rs/fuel-asm/latest/fuel_asm/enum.PanicReason.html";var L=e=>D.includes(e)?e:"unknown",S=e=>{if((e==null?void 0:e.type)==="failure"){let t=L(e.reason);return{doc:t!=="unknown"?`${d}#variant.${t}`:d,reason:t}}return{doc:d,reason:"unknown"}};var E=(e,t)=>typeof t=="bigint"?t.toString():t,I=(e,t)=>`${e===O.ZeroBytes32?"script":e}: ${t}`,f=class extends Error{constructor(t,r){let n=JSON.stringify(S(t.status),null,2),o=t.receipts.filter(i=>i.type===c.ReceiptType.Revert),m=o.length?`Reverts:
${o.map(({type:i,id:p,...l})=>I(p,`${l.val} ${JSON.stringify(l,E)}`)).join(`
`)}`:null,T=t.receipts.filter(i=>i.type===c.ReceiptType.Log||i.type===c.ReceiptType.LogData),g=T.length?`Logs:
${T.map(({type:i,id:p,...l})=>I(p,`${i===c.ReceiptType.LogData?l.data:l.val0}`)).join(`
`)}`:null,x=`Receipts:
${JSON.stringify(t.receipts.map(({type:i,...p})=>({type:c.ReceiptType[i],...p})),E,2)}`;super(`${r}

${n}

${m?`${m}

`:""}${g?`${g}

`:""}${x}`)}};function _(e){let t=[...e.receipts],r=t.pop();if(!r)throw new Error("Expected scriptResultReceipt");if(r.type!==a.ReceiptType.ScriptResult)throw new Error(`Invalid scriptResultReceipt type: ${r.type}`);let n=t.pop();if(!n)throw new Error("Expected returnReceipt");if(n.type!==a.ReceiptType.Return&&n.type!==a.ReceiptType.ReturnData&&n.type!==a.ReceiptType.Revert)throw new Error(`Invalid returnReceipt type: ${n.type}`);return{code:r.result,gasUsed:r.gasUsed,receipts:t,scriptResultReceipt:r,returnReceipt:n,callResult:e}}var R=class{constructor(t,r,n){this.bytes=(0,h.arrayify)(t),this.scriptDataEncoder=r,this.scriptResultDecoder=n}getScriptDataOffset(){return s.VM_TX_MEMORY+s.TRANSACTION_SCRIPT_FIXED_SIZE+new a.ByteArrayCoder(this.bytes.length).encodedLength}getArgOffset(){return this.getScriptDataOffset()+s.ASSET_ID_LEN+s.WORD_SIZE+s.CONTRACT_ID_LEN+s.WORD_SIZE+s.WORD_SIZE}encodeScriptData(t){return this.scriptDataEncoder(t)}decodeCallResult(t){try{let r=_(t);return this.scriptResultDecoder(r)}catch(r){throw new f(t,r.message)}}};var M=new R("0x24000000",()=>new Uint8Array(0),()=>{});0&&(module.exports={Script,returnZeroScript});
//# sourceMappingURL=index.js.map