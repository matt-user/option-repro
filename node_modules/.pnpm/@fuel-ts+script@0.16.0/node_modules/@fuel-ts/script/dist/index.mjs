import{arrayify as N}from"@ethersproject/bytes";import{VM_TX_MEMORY as v,TRANSACTION_SCRIPT_FIXED_SIZE as C,ASSET_ID_LEN as w,WORD_SIZE as y,CONTRACT_ID_LEN as A}from"@fuel-ts/abi-coder";import{ReceiptType as R,ByteArrayCoder as $}from"@fuel-ts/transactions";import{ZeroBytes32 as x}from"@fuel-ts/constants";import{ReceiptType as p}from"@fuel-ts/transactions";var D=["Success","Revert","OutOfGas","TransactionValidity","MemoryOverflow","ArithmeticOverflow","ContractNotFound","MemoryOwnership","NotEnoughBalance","ExpectedInternalContext","AssetIdNotFound","InputNotFound","OutputNotFound","WitnessNotFound","TransactionMaturity","InvalidMetadataIdentifier","MalformedCallStructure","ReservedRegisterNotWritable","ErrorFlag","InvalidImmediateValue","ExpectedCoinInput","MaxMemoryAccess","MemoryWriteOverlap","ContractNotInInputs","InternalBalanceOverflow","ContractMaxSize","ExpectedUnallocatedStack","MaxStaticContractsReached","TransferAmountCannotBeZero","ExpectedOutputVariable","ExpectedParentInternalContext","IllegalJump","NonZeroMessageOutputRecipient","ZeroedMessageOutputRecipient"],l="https://docs.rs/fuel-asm/latest/fuel_asm/enum.PanicReason.html";var h=e=>D.includes(e)?e:"unknown",S=e=>{if((e==null?void 0:e.type)==="failure"){let t=h(e.reason);return{doc:t!=="unknown"?`${l}#variant.${t}`:l,reason:t}}return{doc:l,reason:"unknown"}};var E=(e,t)=>typeof t=="bigint"?t.toString():t,I=(e,t)=>`${e===x?"script":e}: ${t}`,u=class extends Error{constructor(t,r){let n=JSON.stringify(S(t.status),null,2),f=t.receipts.filter(s=>s.type===p.Revert),m=f.length?`Reverts:
${f.map(({type:s,id:o,...i})=>I(o,`${i.val} ${JSON.stringify(i,E)}`)).join(`
`)}`:null,T=t.receipts.filter(s=>s.type===p.Log||s.type===p.LogData),g=T.length?`Logs:
${T.map(({type:s,id:o,...i})=>I(o,`${s===p.LogData?i.data:i.val0}`)).join(`
`)}`:null,O=`Receipts:
${JSON.stringify(t.receipts.map(({type:s,...o})=>({type:p[s],...o})),E,2)}`;super(`${r}

${n}

${m?`${m}

`:""}${g?`${g}

`:""}${O}`)}};function L(e){let t=[...e.receipts],r=t.pop();if(!r)throw new Error("Expected scriptResultReceipt");if(r.type!==R.ScriptResult)throw new Error(`Invalid scriptResultReceipt type: ${r.type}`);let n=t.pop();if(!n)throw new Error("Expected returnReceipt");if(n.type!==R.Return&&n.type!==R.ReturnData&&n.type!==R.Revert)throw new Error(`Invalid returnReceipt type: ${n.type}`);return{code:r.result,gasUsed:r.gasUsed,receipts:t,scriptResultReceipt:r,returnReceipt:n,callResult:e}}var d=class{constructor(t,r,n){this.bytes=N(t),this.scriptDataEncoder=r,this.scriptResultDecoder=n}getScriptDataOffset(){return v+C+new $(this.bytes.length).encodedLength}getArgOffset(){return this.getScriptDataOffset()+w+y+A+y+y}encodeScriptData(t){return this.scriptDataEncoder(t)}decodeCallResult(t){try{let r=L(t);return this.scriptResultDecoder(r)}catch(r){throw new u(t,r.message)}}};var X=new d("0x24000000",()=>new Uint8Array(0),()=>{});export{d as Script,X as returnZeroScript};
//# sourceMappingURL=index.mjs.map